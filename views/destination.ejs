<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title><%= place.name %> | Kerala Tourism</title>
  <link rel="stylesheet" href="/style.css" />
</head>
<body>
  <%- include('partials/header') %>

  <header class="header">
    <div class="logo-title">
      <h1>Welcome to Kerala</h1>
      <p>God's Own Country</p>
    </div>
    <div class="menu-icon" onclick="toggleMenu()">â˜°</div>
  </header>

  <nav class="navbar">
    <a href="/">Home</a>
    <a href="/destinations">Destinations</a>
    <a href="/events">Events</a>
  </nav>

  <div id="sideMenu" class="side-menu">
    <span class="close-btn" onclick="toggleMenu()">âœ–</span>
    <a href="/gallery">ğŸ“¸ Photo Gallery</a>
    <a href="/districts">ğŸ“ Districts in Kerala</a>
    <a href="/faqs">â“ FAQs</a>
    <a href="https://www.keralatourism.org/" target="_blank">ğŸŒ Kerala Gov Site</a>
  </div>

  <div class="content">
    <h2><%= place.name %></h2>
    <p><%= place.description %></p>
    <a href="<%= place.mapLink %>" target="_blank">View on Google Maps</a>

    <h3>ğŸ—ºï¸ Tourist Spots:</h3>
    <ul>
      <% place.spots.forEach(spot => { %>
        <li><%= spot %></li>
      <% }) %>
    </ul>

    <section class="photo-gallery">
      <h2>ğŸ“· Photos:</h2>
      <% if (place.images && place.images.length > 0) { %>
        <div class="photo-grid">
          <% place.images.forEach(img => { %>
            <img src="/<%= img %>" alt="<%= place.name %> Image">
          <% }); %>
        </div>
      <% } else { %>
        <p>No photos available.</p>
      <% } %>
    </section>

    <section class="reviews-section">
      <h3>ğŸ’¬ Visitor Reviews:</h3>
      <% if (reviews.length === 0) { %>
        <p class="no-reviews">No reviews yet. Be the first!</p>
      <% } else { %>
        <% reviews.forEach(r => { %>
          <div class="review-box">
            <div class="review-name"><%= r.name %></div>
            <div class="review-comment"><%= r.comment %></div>
          </div>
        <% }) %>
      <% } %>

      <h3>âœ Leave a Review:</h3>
      <form action="/review" method="POST" class="review-form">
        <input type="hidden" name="placeId" value="<%= place.id %>">
        <% if (session && session.user) { %>
          <input type="text" name="name" value="<%= session.user.username %>" readonly>
        <% } else { %>
          <input type="text" name="name" placeholder="Your Name" required>
        <% } %>
        <textarea name="comment" placeholder="Your Review..." rows="4" required></textarea>
        <button type="submit">Submit Review</button>
      </form>
    </section>
  </div>

  <%- include('partials/footer') %>
</body>
</html>
